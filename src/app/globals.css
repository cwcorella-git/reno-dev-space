@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 255, 255, 255;
  --background-start-rgb: 15, 23, 42;
  --background-end-rgb: 30, 27, 75;
}

/* Font family utilities using CSS variables from Next.js font loader */
.font-sans {
  font-family: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      rgb(var(--background-start-rgb)),
      rgb(var(--background-end-rgb))
    );
  min-height: 100vh;
  overflow: hidden;
}

/* Custom scrollbar for chat */
.chat-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.chat-scrollbar::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.chat-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.chat-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* Hide number input spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* Dancing vote outlines — animated dashed borders around voted blocks */
@keyframes dash-flow-1 {
  to { stroke-dashoffset: -40; }
}
@keyframes dash-flow-2 {
  to { stroke-dashoffset: 60; }
}
@keyframes dash-flow-3 {
  to { stroke-dashoffset: -80; }
}

.dash-dance-1 { animation: dash-flow-1 2s linear infinite; }
.dash-dance-2 { animation: dash-flow-2 3s linear infinite; }
.dash-dance-3 { animation: dash-flow-3 4.5s linear infinite; }

/* ════════════════════════════════════════════════════════════════════
   One-shot celebration effects (8 total)
   Triggered when a user upvotes a block. Plays once, visible only to voter.
   Uses --celebrate-color set inline from the block's text color.
   ════════════════════════════════════════════════════════════════════ */

.celebrate-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 100;
}

/* Effect name label (admin only) */
@keyframes celebrate-label-fade {
  0% { opacity: 1; transform: translateY(0); }
  70% { opacity: 1; transform: translateY(-8px); }
  100% { opacity: 0; transform: translateY(-16px); }
}
.celebrate-label {
  position: absolute;
  top: -24px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  font-size: 10px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 4px;
  white-space: nowrap;
  animation: celebrate-label-fade 1s ease-out forwards;
  z-index: 101;
}

/* --- 1. Ring Burst: expanding ring from center --- */
@keyframes celebrate-ring-burst {
  0% {
    box-shadow: 0 0 0 0 var(--celebrate-color, #818cf8);
    opacity: 1;
  }
  100% {
    box-shadow: 0 0 0 40px transparent;
    opacity: 0;
  }
}
.celebrate-ring-burst {
  border-radius: 4px;
  animation: celebrate-ring-burst 0.6s ease-out forwards;
}

/* --- 2. Confetti Pop: colored dots burst outward --- */
@keyframes celebrate-confetti-pop {
  0% {
    box-shadow:
      0 0 0 var(--celebrate-color, #f87171),
      0 0 0 #fbbf24,
      0 0 0 #34d399,
      0 0 0 #22d3ee,
      0 0 0 #818cf8,
      0 0 0 #e879f9;
    opacity: 1;
  }
  100% {
    box-shadow:
      -25px -25px 0 var(--celebrate-color, #f87171),
      25px -20px 0 #fbbf24,
      -30px 15px 0 #34d399,
      30px 20px 0 #22d3ee,
      -15px 30px 0 #818cf8,
      20px -30px 0 #e879f9;
    opacity: 0;
  }
}
.celebrate-confetti-pop {
  width: 4px;
  height: 4px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: transparent;
  border-radius: 50%;
  animation: celebrate-confetti-pop 0.7s ease-out forwards;
}

/* --- 3. Glow Flash: bright flash then fade --- */
@keyframes celebrate-glow-flash {
  0% {
    box-shadow: 0 0 0 0 transparent, inset 0 0 0 0 transparent;
    background: transparent;
  }
  15% {
    box-shadow: 0 0 30px 10px var(--celebrate-color, #818cf8), inset 0 0 20px var(--celebrate-color, #818cf8);
    background: rgba(255, 255, 255, 0.3);
  }
  100% {
    box-shadow: 0 0 0 0 transparent, inset 0 0 0 0 transparent;
    background: transparent;
  }
}
.celebrate-glow-flash {
  border-radius: 4px;
  animation: celebrate-glow-flash 0.5s ease-out forwards;
}

/* --- 4. Bounce Pop: scale up then spring back --- */
@keyframes celebrate-bounce-pop {
  0% { transform: scale(1); }
  30% { transform: scale(1.15); }
  50% { transform: scale(0.95); }
  70% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
.celebrate-bounce-pop {
  animation: celebrate-bounce-pop 0.5s ease-out forwards;
}

/* --- 5. Shimmer Sweep: diagonal light sweep --- */
@keyframes celebrate-shimmer-sweep {
  0% {
    background: linear-gradient(
      105deg,
      transparent 40%,
      rgba(255, 255, 255, 0.8) 50%,
      transparent 60%
    );
    background-size: 200% 100%;
    background-position: 200% center;
  }
  100% {
    background: linear-gradient(
      105deg,
      transparent 40%,
      rgba(255, 255, 255, 0.8) 50%,
      transparent 60%
    );
    background-size: 200% 100%;
    background-position: -200% center;
  }
}
.celebrate-shimmer-sweep {
  border-radius: 4px;
  animation: celebrate-shimmer-sweep 0.6s ease-out forwards;
}

/* --- 6. Sparkle Burst: dots at corners appear and fade --- */
@keyframes celebrate-sparkle-dot {
  0% { transform: scale(0); opacity: 1; }
  50% { transform: scale(1.5); opacity: 1; }
  100% { transform: scale(0); opacity: 0; }
}
.celebrate-sparkle-burst::before,
.celebrate-sparkle-burst::after {
  content: '';
  position: absolute;
  width: 6px;
  height: 6px;
  background: var(--celebrate-color, #fbbf24);
  border-radius: 50%;
  animation: celebrate-sparkle-dot 0.6s ease-out forwards;
}
.celebrate-sparkle-burst::before {
  top: -8px;
  left: -8px;
  animation-delay: 0s;
}
.celebrate-sparkle-burst::after {
  bottom: -8px;
  right: -8px;
  animation-delay: 0.1s;
}
.celebrate-sparkle-burst {
  animation: celebrate-sparkle-main 0.7s ease-out forwards;
}
@keyframes celebrate-sparkle-main {
  0%, 100% { opacity: 1; }
}

/* --- 7. Ripple: concentric rings expand --- */
@keyframes celebrate-ripple-1 {
  0% { box-shadow: 0 0 0 0 var(--celebrate-color, #22d3ee); opacity: 0.6; }
  100% { box-shadow: 0 0 0 25px transparent; opacity: 0; }
}
@keyframes celebrate-ripple-2 {
  0% { box-shadow: 0 0 0 0 var(--celebrate-color, #22d3ee); opacity: 0.4; }
  100% { box-shadow: 0 0 0 40px transparent; opacity: 0; }
}
.celebrate-ripple::before,
.celebrate-ripple::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 4px;
}
.celebrate-ripple::before {
  animation: celebrate-ripple-1 0.6s ease-out forwards;
}
.celebrate-ripple::after {
  animation: celebrate-ripple-2 0.8s ease-out 0.1s forwards;
}
.celebrate-ripple {
  animation: celebrate-ripple-main 0.9s ease-out forwards;
}
@keyframes celebrate-ripple-main {
  0%, 100% { opacity: 1; }
}

/* --- 8. Star Shower: stars rise upward --- */
@keyframes celebrate-star-rise {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translateY(-30px) scale(0.5); opacity: 0; }
}
.celebrate-star-shower::before,
.celebrate-star-shower::after {
  content: '★';
  position: absolute;
  font-size: 12px;
  color: var(--celebrate-color, #fbbf24);
  animation: celebrate-star-rise 0.7s ease-out forwards;
}
.celebrate-star-shower::before {
  top: 0;
  left: 20%;
  animation-delay: 0s;
}
.celebrate-star-shower::after {
  top: 0;
  right: 20%;
  animation-delay: 0.15s;
}
.celebrate-star-shower {
  animation: celebrate-star-main 0.85s ease-out forwards;
}
@keyframes celebrate-star-main {
  0%, 100% { opacity: 1; }
}
