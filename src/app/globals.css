@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 255, 255, 255;
  --background-start-rgb: 15, 23, 42;
  --background-end-rgb: 30, 27, 75;
}

/* Font family utilities using CSS variables from Next.js font loader */
.font-sans {
  font-family: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      rgb(var(--background-start-rgb)),
      rgb(var(--background-end-rgb))
    );
  min-height: 100vh;
  overflow: hidden;
}

/* Custom scrollbar for chat */
.chat-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.chat-scrollbar::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.chat-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.chat-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* Hide number input spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* Dancing vote outlines — animated dashed borders around voted blocks */
@keyframes dash-flow-1 {
  to { stroke-dashoffset: -40; }
}
@keyframes dash-flow-2 {
  to { stroke-dashoffset: 60; }
}
@keyframes dash-flow-3 {
  to { stroke-dashoffset: -80; }
}

.dash-dance-1 { animation: dash-flow-1 2s linear infinite; }
.dash-dance-2 { animation: dash-flow-2 3s linear infinite; }
.dash-dance-3 { animation: dash-flow-3 4.5s linear infinite; }

/* ════════════════════════════════════════════════════════════════════
   One-shot celebration effects (7 total)
   Triggered when a user upvotes a block. Plays once, visible only to voter.
   Uses --celebrate-color set inline from the block's text color.
   ════════════════════════════════════════════════════════════════════ */

.celebrate-overlay {
  position: absolute;
  inset: -20px;
  pointer-events: none;
  z-index: 100;
  overflow: visible;
}

/* Effect name label (admin only) */
@keyframes celebrate-label-fade {
  0% { opacity: 1; transform: translateY(0) scale(1); }
  50% { opacity: 1; transform: translateY(-12px) scale(1.1); }
  100% { opacity: 0; transform: translateY(-24px) scale(0.9); }
}
.celebrate-label {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.9);
  color: white;
  font-size: 11px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 6px;
  white-space: nowrap;
  animation: celebrate-label-fade 1.2s ease-out forwards;
  z-index: 101;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* --- 1. Ring Burst: expanding ring from edges --- */
@keyframes celebrate-ring-burst {
  0% {
    box-shadow:
      inset 0 0 0 2px var(--celebrate-color, #818cf8),
      0 0 0 0 var(--celebrate-color, #818cf8);
    opacity: 1;
  }
  50% {
    box-shadow:
      inset 0 0 0 0 transparent,
      0 0 20px 4px var(--celebrate-color, #818cf8);
  }
  100% {
    box-shadow:
      inset 0 0 0 0 transparent,
      0 0 0 50px transparent;
    opacity: 0;
  }
}
.celebrate-ring-burst {
  border-radius: 8px;
  animation: celebrate-ring-burst 0.7s ease-out forwards;
}

/* --- 2. Confetti Pop: 12 particles exploding from all edges --- */
.celebrate-confetti-pop {
  position: absolute;
  inset: 20px;
}
.celebrate-confetti-pop::before,
.celebrate-confetti-pop::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}
.celebrate-confetti-pop::before {
  /* 6 particles from top-left region */
  box-shadow:
    0 0 0 3px #f87171,
    5px 5px 0 3px #fbbf24,
    10px 0 0 3px #34d399,
    0 10px 0 3px #22d3ee,
    15px 15px 0 3px #818cf8,
    -5px 5px 0 3px #e879f9;
  animation: confetti-burst-1 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}
.celebrate-confetti-pop::after {
  /* 6 particles from bottom-right region */
  box-shadow:
    100% 100% 0 3px #fb923c,
    95% 90% 0 3px #a78bfa,
    100% 85% 0 3px #f472b6,
    90% 100% 0 3px #2dd4bf,
    85% 95% 0 3px #facc15,
    105% 95% 0 3px #38bdf8;
  animation: confetti-burst-2 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}
@keyframes confetti-burst-1 {
  0% {
    box-shadow:
      0 0 0 3px #f87171,
      5px 5px 0 3px #fbbf24,
      10px 0 0 3px #34d399,
      0 10px 0 3px #22d3ee,
      15px 15px 0 3px #818cf8,
      -5px 5px 0 3px #e879f9;
    opacity: 1;
  }
  100% {
    box-shadow:
      -50px -60px 0 2px #f87171,
      -30px -70px 0 2px #fbbf24,
      -70px -40px 0 2px #34d399,
      -60px -20px 0 2px #22d3ee,
      -20px -80px 0 2px #818cf8,
      -80px -50px 0 2px #e879f9;
    opacity: 0;
  }
}
@keyframes confetti-burst-2 {
  0% {
    box-shadow:
      calc(100% - 5px) calc(100% - 5px) 0 3px #fb923c,
      calc(100% - 10px) calc(100% - 15px) 0 3px #a78bfa,
      calc(100% - 0px) calc(100% - 20px) 0 3px #f472b6,
      calc(100% - 15px) calc(100% - 0px) 0 3px #2dd4bf,
      calc(100% - 20px) calc(100% - 10px) 0 3px #facc15,
      calc(100% + 5px) calc(100% - 10px) 0 3px #38bdf8;
    opacity: 1;
  }
  100% {
    box-shadow:
      calc(100% + 45px) calc(100% + 55px) 0 2px #fb923c,
      calc(100% + 25px) calc(100% + 65px) 0 2px #a78bfa,
      calc(100% + 65px) calc(100% + 35px) 0 2px #f472b6,
      calc(100% + 55px) calc(100% + 15px) 0 2px #2dd4bf,
      calc(100% + 15px) calc(100% + 75px) 0 2px #facc15,
      calc(100% + 75px) calc(100% + 45px) 0 2px #38bdf8;
    opacity: 0;
  }
}

/* --- 3. Glow Flash: intense flash with color burst --- */
@keyframes celebrate-glow-flash {
  0% {
    box-shadow: 0 0 0 0 transparent;
    background: transparent;
  }
  10% {
    box-shadow:
      0 0 40px 15px var(--celebrate-color, #818cf8),
      inset 0 0 30px var(--celebrate-color, #818cf8);
    background: rgba(255, 255, 255, 0.4);
  }
  30% {
    box-shadow:
      0 0 60px 25px var(--celebrate-color, #818cf8),
      inset 0 0 40px var(--celebrate-color, #818cf8);
    background: rgba(255, 255, 255, 0.2);
  }
  100% {
    box-shadow: 0 0 0 0 transparent;
    background: transparent;
  }
}
.celebrate-glow-flash {
  border-radius: 8px;
  animation: celebrate-glow-flash 0.6s ease-out forwards;
}

/* --- 4. Pulse Pop: pulsing border with scale --- */
@keyframes celebrate-pulse-pop {
  0% {
    transform: scale(1);
    box-shadow: inset 0 0 0 3px var(--celebrate-color, #818cf8);
    opacity: 1;
  }
  25% {
    transform: scale(1.08);
    box-shadow:
      inset 0 0 0 4px var(--celebrate-color, #818cf8),
      0 0 20px 5px var(--celebrate-color, #818cf8);
  }
  50% {
    transform: scale(0.98);
    box-shadow: inset 0 0 0 2px var(--celebrate-color, #818cf8);
  }
  75% {
    transform: scale(1.04);
    box-shadow:
      inset 0 0 0 3px var(--celebrate-color, #818cf8),
      0 0 15px 3px var(--celebrate-color, #818cf8);
  }
  100% {
    transform: scale(1);
    box-shadow: inset 0 0 0 0 transparent;
    opacity: 0;
  }
}
.celebrate-pulse-pop {
  border-radius: 8px;
  animation: celebrate-pulse-pop 0.7s ease-out forwards;
}

/* --- 5. Shimmer Sweep: bright diagonal sweep with glow --- */
@keyframes celebrate-shimmer-sweep {
  0% {
    background: linear-gradient(
      110deg,
      transparent 20%,
      rgba(255, 255, 255, 0.1) 35%,
      rgba(255, 255, 255, 0.9) 50%,
      rgba(255, 255, 255, 0.1) 65%,
      transparent 80%
    );
    background-size: 300% 100%;
    background-position: 150% center;
    box-shadow: none;
  }
  50% {
    box-shadow: 0 0 30px 10px rgba(255, 255, 255, 0.3);
  }
  100% {
    background: linear-gradient(
      110deg,
      transparent 20%,
      rgba(255, 255, 255, 0.1) 35%,
      rgba(255, 255, 255, 0.9) 50%,
      rgba(255, 255, 255, 0.1) 65%,
      transparent 80%
    );
    background-size: 300% 100%;
    background-position: -150% center;
    box-shadow: none;
  }
}
.celebrate-shimmer-sweep {
  border-radius: 8px;
  animation: celebrate-shimmer-sweep 0.7s ease-in-out forwards;
}

/* --- 6. Sparkle Burst: 8 sparkles at all corners and edges --- */
.celebrate-sparkle-burst {
  position: absolute;
  inset: 20px;
}
.celebrate-sparkle-burst::before,
.celebrate-sparkle-burst::after {
  content: '✦ ✦ ✦ ✦';
  position: absolute;
  font-size: 14px;
  letter-spacing: 8px;
  color: var(--celebrate-color, #fbbf24);
  text-shadow:
    0 0 10px var(--celebrate-color, #fbbf24),
    0 0 20px var(--celebrate-color, #fbbf24);
  white-space: nowrap;
}
.celebrate-sparkle-burst::before {
  top: -15px;
  left: -10px;
  animation: sparkle-top 0.8s ease-out forwards;
}
.celebrate-sparkle-burst::after {
  bottom: -15px;
  right: -10px;
  animation: sparkle-bottom 0.8s ease-out 0.1s forwards;
}
@keyframes sparkle-top {
  0% {
    opacity: 0;
    transform: translateY(10px) scale(0.5);
  }
  30% {
    opacity: 1;
    transform: translateY(-5px) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translateY(-25px) scale(0.3);
  }
}
@keyframes sparkle-bottom {
  0% {
    opacity: 0;
    transform: translateY(-10px) scale(0.5);
  }
  30% {
    opacity: 1;
    transform: translateY(5px) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translateY(25px) scale(0.3);
  }
}

/* --- 7. Star Shower: 6 stars rising in waves --- */
.celebrate-star-shower {
  position: absolute;
  inset: 20px;
}
.celebrate-star-shower::before,
.celebrate-star-shower::after {
  position: absolute;
  font-size: 16px;
  text-shadow:
    0 0 10px var(--celebrate-color, #fbbf24),
    0 0 20px var(--celebrate-color, #fbbf24);
}
.celebrate-star-shower::before {
  content: '★  ★  ★';
  color: var(--celebrate-color, #fbbf24);
  top: 50%;
  left: 0;
  width: 100%;
  text-align: center;
  letter-spacing: 20px;
  animation: stars-rise-1 0.9s ease-out forwards;
}
.celebrate-star-shower::after {
  content: '☆  ☆';
  color: var(--celebrate-color, #fbbf24);
  top: 50%;
  left: 15%;
  width: 70%;
  text-align: center;
  letter-spacing: 30px;
  animation: stars-rise-2 0.9s ease-out 0.15s forwards;
}
@keyframes stars-rise-1 {
  0% {
    opacity: 0;
    transform: translateY(0) scale(0.5);
  }
  20% {
    opacity: 1;
    transform: translateY(-10px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-60px) scale(0.3) rotate(20deg);
  }
}
@keyframes stars-rise-2 {
  0% {
    opacity: 0;
    transform: translateY(5px) scale(0.5);
  }
  25% {
    opacity: 1;
    transform: translateY(-5px) scale(1.1);
  }
  100% {
    opacity: 0;
    transform: translateY(-70px) scale(0.2) rotate(-15deg);
  }
}
